<!--
///////////////////////////////////////////////////////////////////////////////////
//                     Copyright (C) 2018 Dr Robert P. Wolf                      //
//                                                                               //
// Permission is hereby granted, free of charge, to any person obtaining a copy  //
// of this software and associated documentation files (the "Software"), to deal //
// in the Software without restriction, including without limitation the rights  //
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell     //
// copies of the Software, and to permit persons to whom the Software is         //
// furnished to do so, subject to the following conditions:                      //
//                                                                               //
// The above copyright notice and this permission notice shall be included in    //
// all copies or substantial portions of the Software.                           //
//                                                                               //
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR    //
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,      //
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE   //
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER        //
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, //
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN     //
// THE SOFTWARE.                                                                 //
///////////////////////////////////////////////////////////////////////////////////

-->

<html>

<head>
	<title>SEAWOLF</title>
	<style>
	td {padding: 6px;}
	</style>
</head>

<script src="trident.js" type="text/javascript" encoding="UTF-8"></script>
<script src="triton.js" type="text/javascript" encoding="UTF-8"></script>

<body bgcolor="#000044" style = "margin: 0;"
	onkeydown="javascript: return ctrl (event . key . toLowerCase ());"
	onwheel="javascript: return onWheel (event);"
	onmousedown="javascript: return onMouseDown (event);"
	oncontextmenu="javascript: event . preventDefault ();"
>
<div><canvas id="seawolf" /></div>

</body>

<script>

var canvas = document . getElementById ('seawolf');
var ctx = canvas . getContext ('2d');

var texas = new Virginia ('Texas');
var hawaii = new Virginia ('Hawaii');
var virginia = new Virginia ('Virginia');
var kuguar = new Akula ('Kuguar');
hawaii . position = {x: 2.5, y: 0, bearing: 40, depth: 150}; hawaii . setSpeed ('half'); hawaii . depth_target = 150;
texas . position = {x: 2.5, y: 0, bearing: 200, depth: 150}; texas . setSpeed ('flank'); texas . depth_target = 150;
kuguar . position = {x: -2.5, y: 0, bearing: 100, depth: 150}; kuguar . setSpeed ('full'); kuguar . depth_target = 150;


var time = Date . now ();

var resize = function () {
	var now = Date . now ();
	canvas . width = window . innerWidth;
	canvas . height = window . innerHeight;
	//console . log (canvas . width, canvas . height);
	drawGrid (ctx, window . innerWidth, window . innerHeight, texas);
	simulateTridents ((now - time) / 1000);
	removeTridents ();
	drawTridents (ctx);
	time = now;
};

setInterval (resize, 50);
//resize ();

var ctrl = function (key) {
	if (key === 'control' || key === 'r') return true;
	console . log (key);
	return true;
};

var onWheel = function (e) {if (e . deltaY > 0) {if (scaling <= 0.32768) return; scaling /= 1.25;} else scaling *= 1.25; console . log (scaling); return false;};
var onMouseDown = function (e) {e . preventDefault (); console . log (e); return false;};

//addTrident ({name: 'Collins', delete: false});
//addTrident ({name: 'Los Angeles', delete: false});
//addTrident ({name: 'Barracuda', delete: true});
//addTrident ({name: 'Kilo', delete: true});
//addTrident ({name: 'Trident', delete: false});
//addTrident ({name: 'Triton', delete: false});
addTrident (texas);
addTrident (hawaii);
addTrident (virginia);
addTrident (kuguar);

classifyTridents (texas);

showTridents ();
removeTridents ();
showTridents ();

</script>

</html>
